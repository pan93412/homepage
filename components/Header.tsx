import { cx } from "classix";
import Link from "next/link";
import React from "react";
import { BsGithub } from "react-icons/bs";
import { type LinkProps } from "@utils/NextLinkProps";

/**
 * The available entries in the header
 */
export type HeaderEntry = "About" | "Portfolio" | "GitHub";

/**
 * The configuration of Header.
 */
export interface HeaderProps {
  /**
   * Which one is active?
   */
  active?: HeaderEntry | null;
}

/**
 * Header component
 */
export function Header({ active }: HeaderProps) {
  return (
    <header className="mb-6 flex flex-col items-center justify-between gap-1 md:flex-row">
      <div className="block font-mono">
        <Link href="/">
          <Brand />
        </Link>
      </div>
      <NavContainer>
        <NavItem href="/" active={active === "About"}>
          About
        </NavItem>
        <NavItem href="/portfolio" active={active === "Portfolio"}>
          Portfolio
        </NavItem>
        {/* <NavItem href="/oss" active={active === "OSS"}>
          OSS
        </NavItem> */}
        {/* <NavItem href="/extras" active={active === "Extras"}>
          Extras
        </NavItem> */}
        <NavItem
          href="https://github.com/pan93412/homepage"
          active={active === "GitHub"}
        >
          <BsGithub className="block m-1" />
        </NavItem>
      </NavContainer>
    </header>
  );
}

/**
 * The navigation container of {@link Header}.
 */
function NavContainer({
  className,
  ...props
}: React.ComponentPropsWithoutRef<"ul">) {
  return (
    <nav>
      <ul
        className={cx(
          className,
          "NavContainer",
          "list-none",
          "grid gap-x-4",
          "grid-flow-col",
          "transition-all"
        )}
        {...props}
      />
    </nav>
  );
}

/**
 * The navigation item of {@link Header}.
 */
function NavItem({
  className,
  active,
  children,
  ...props
}: LinkProps & {
  /**
   * Is this entry active?
   */
  active?: boolean;
}) {
  return (
    <Link {...props}>
      <li
        className={cx(
          className,
          "NavItem",
          "transition-all ease-in-out",
          "rounded py-1 px-2",
          // "min-w-21",
          "text-center",
          "hover:bg-neutral-800",
          active && "bg-neutral-800 font-bold"
        )}
      >
        {children}
      </li>
    </Link>
  );
}

/**
 * The brand of {@link Header}.
 */
function Brand() {
  return (
    <svg
      width="95"
      height="17"
      viewBox="0 0 95 17"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M4.304 16.24V14.128C3.25867 14.0427 2.432 13.712 1.824 13.136C1.22667 12.56 0.922667 11.8027 0.912 10.864H2.912C2.912 11.2587 3.03467 11.5893 3.28 11.856C3.52533 12.112 3.86667 12.2827 4.304 12.368V8.976L4.016 8.896C3.09867 8.66133 2.38933 8.24 1.888 7.632C1.39733 7.024 1.152 6.288 1.152 5.424C1.152 4.51733 1.43467 3.776 2 3.2C2.56533 2.61333 3.33333 2.27733 4.304 2.192V0.079999H5.296V2.176C6.288 2.26133 7.06667 2.592 7.632 3.168C8.208 3.73333 8.50133 4.46933 8.512 5.376H6.512C6.512 4.58667 6.10667 4.112 5.296 3.952V7.184L5.824 7.328C6.752 7.56267 7.46133 7.984 7.952 8.592C8.44267 9.18933 8.688 9.93067 8.688 10.816C8.688 11.744 8.37867 12.512 7.76 13.12C7.152 13.7173 6.33067 14.0587 5.296 14.144V16.24H4.304ZM3.152 5.312C3.152 5.68533 3.248 6.01067 3.44 6.288C3.64267 6.56533 3.93067 6.768 4.304 6.896V3.952C3.536 4.10133 3.152 4.55467 3.152 5.312ZM5.296 12.384C5.73333 12.32 6.07467 12.16 6.32 11.904C6.56533 11.6373 6.688 11.3013 6.688 10.896C6.688 10.5013 6.56533 10.16 6.32 9.872C6.07467 9.584 5.73333 9.392 5.296 9.296V12.384ZM20.4195 16.88V5.2H22.3715V6.784H22.4035C22.5635 6.22933 22.8462 5.80267 23.2515 5.504C23.6675 5.19467 24.1795 5.04 24.7875 5.04C25.6515 5.04 26.3448 5.344 26.8675 5.952C27.4008 6.56 27.6675 7.376 27.6675 8.4V10.784C27.6675 11.8187 27.4008 12.64 26.8675 13.248C26.3448 13.856 25.6515 14.16 24.7875 14.16C24.1902 14.16 23.6835 14.0107 23.2675 13.712C22.8515 13.4027 22.5635 12.9707 22.4035 12.416H22.3715L22.4195 14.416V16.88H20.4195ZM24.0515 12.432C24.5635 12.432 24.9582 12.2827 25.2355 11.984C25.5235 11.6853 25.6675 11.2587 25.6675 10.704V8.496C25.6675 7.94133 25.5235 7.51467 25.2355 7.216C24.9582 6.91733 24.5635 6.768 24.0515 6.768C23.5395 6.768 23.1395 6.92267 22.8515 7.232C22.5635 7.54133 22.4195 7.97867 22.4195 8.544V10.656C22.4195 11.2213 22.5635 11.6587 22.8515 11.968C23.1395 12.2773 23.5395 12.432 24.0515 12.432ZM32.6053 14.16C31.6986 14.16 30.9839 13.9253 30.4613 13.456C29.9386 12.976 29.6773 12.3253 29.6773 11.504C29.6773 10.64 29.9759 9.97333 30.5733 9.504C31.1706 9.024 32.0026 8.784 33.0693 8.784H35.1813V8.048C35.1813 7.62133 35.0426 7.29067 34.7653 7.056C34.4879 6.82133 34.0986 6.704 33.5973 6.704C33.1386 6.704 32.7599 6.8 32.4613 6.992C32.1733 7.184 32.0133 7.44 31.9813 7.76H30.0773C30.1199 6.93867 30.4666 6.28267 31.1173 5.792C31.7786 5.29067 32.6266 5.04 33.6613 5.04C34.7493 5.04 35.6079 5.30667 36.2373 5.84C36.8666 6.37333 37.1813 7.104 37.1813 8.032V14H35.2453V12.512H35.2133C35.0959 13.024 34.8079 13.4293 34.3493 13.728C33.8906 14.016 33.3093 14.16 32.6053 14.16ZM33.2613 12.672C33.8266 12.672 34.2853 12.5333 34.6373 12.256C34.9999 11.968 35.1813 11.5893 35.1813 11.12V10.064H33.1173C32.6693 10.064 32.3173 10.1813 32.0613 10.416C31.8053 10.64 31.6773 10.9493 31.6773 11.344C31.6773 11.76 31.8159 12.0853 32.0933 12.32C32.3813 12.5547 32.7706 12.672 33.2613 12.672ZM39.607 14V5.2H41.559V6.88H41.591C41.687 6.304 41.9377 5.856 42.343 5.536C42.7483 5.20533 43.2763 5.04 43.927 5.04C44.791 5.04 45.479 5.328 45.991 5.904C46.5137 6.48 46.775 7.25333 46.775 8.224V14H44.775V8.432C44.775 7.89867 44.631 7.488 44.343 7.2C44.0657 6.912 43.687 6.768 43.207 6.768C42.7057 6.768 42.311 6.91733 42.023 7.216C41.7457 7.51467 41.607 7.94133 41.607 8.496V14H39.607ZM50.8648 14L54.0648 8.56L53.9688 8.496C53.7554 8.82667 53.4781 9.08267 53.1368 9.264C52.7954 9.44533 52.3954 9.536 51.9368 9.536C51.3181 9.536 50.7741 9.38667 50.3048 9.088C49.8354 8.77867 49.4674 8.35733 49.2008 7.824C48.9448 7.29067 48.8168 6.672 48.8168 5.968C48.8168 5.22133 48.9821 4.56 49.3128 3.984C49.6541 3.408 50.1181 2.96 50.7048 2.64C51.3021 2.32 51.9901 2.16 52.7688 2.16C53.5474 2.16 54.2301 2.32533 54.8168 2.656C55.4141 2.98667 55.8781 3.44533 56.2088 4.032C56.5501 4.608 56.7208 5.27467 56.7208 6.032C56.7208 6.53333 56.6248 7.06667 56.4328 7.632C56.2408 8.18667 55.9688 8.77867 55.6168 9.408L53.0888 14H50.8648ZM52.7688 8.032C53.3554 8.032 53.8301 7.84 54.1928 7.456C54.5661 7.072 54.7528 6.56533 54.7528 5.936C54.7528 5.328 54.5661 4.832 54.1928 4.448C53.8301 4.05333 53.3554 3.856 52.7688 3.856C52.1821 3.856 51.7021 4.05333 51.3288 4.448C50.9661 4.832 50.7848 5.328 50.7848 5.936C50.7848 6.56533 50.9661 7.072 51.3288 7.456C51.7021 7.84 52.1821 8.032 52.7688 8.032ZM62.2505 14.16C61.4932 14.16 60.8318 14.0213 60.2665 13.744C59.7118 13.4667 59.2798 13.0773 58.9705 12.576C58.6612 12.0747 58.5065 11.4827 58.5065 10.8H60.5225C60.5225 11.3227 60.6718 11.7333 60.9705 12.032C61.2798 12.32 61.7118 12.464 62.2665 12.464C62.8212 12.464 63.2478 12.3147 63.5465 12.016C63.8452 11.7173 63.9945 11.312 63.9945 10.8V9.92C63.9945 9.39733 63.8398 8.992 63.5305 8.704C63.2318 8.40533 62.8105 8.256 62.2665 8.256H60.8905V6.656L63.4345 4.032H59.0345V2.32H65.5945V3.968L63.0185 6.592C63.9465 6.72 64.6772 7.07733 65.2105 7.664C65.7438 8.25067 66.0105 9.00267 66.0105 9.92V10.8C66.0105 11.4827 65.8558 12.0747 65.5465 12.576C65.2372 13.0773 64.7998 13.4667 64.2345 13.744C63.6692 14.0213 63.0078 14.16 62.2505 14.16ZM73.2683 14V11.68H68.0843V8.784L72.4203 2.32H74.6283L70.0043 9.296V9.92H73.2683V7.28H75.2843V14H73.2683ZM78.094 14V12.192H81.134V4.096L78.078 6.368V4.256L80.766 2.32H83.134V12.192H85.582V14H78.094ZM87.6078 14V12.176L91.5598 8.08C91.9651 7.65333 92.2638 7.25333 92.4558 6.88C92.6584 6.50667 92.7598 6.128 92.7598 5.744C92.7598 5.17867 92.6051 4.74133 92.2958 4.432C91.9864 4.112 91.5704 3.952 91.0477 3.952C90.5038 3.952 90.0718 4.11733 89.7518 4.448C89.4424 4.768 89.2878 5.216 89.2878 5.792H87.2878C87.2984 5.04533 87.4584 4.40533 87.7678 3.872C88.0878 3.328 88.5251 2.90667 89.0798 2.608C89.6451 2.30933 90.3118 2.16 91.0798 2.16C92.1998 2.16 93.0904 2.46933 93.7518 3.088C94.4238 3.70667 94.7598 4.54933 94.7598 5.616C94.7598 6.23467 94.5998 6.848 94.2798 7.456C93.9704 8.05333 93.4691 8.704 92.7758 9.408L90.0558 12.192H94.9038V14H87.6078Z"
        fill="currentcolor"
      />
    </svg>
  );
}

export default Header;
