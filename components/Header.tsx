import { cx } from "classix";
import Link from "next/link";
import React from "react";
import { BsGithub } from "react-icons/bs";
import { type LinkProps } from "@utils/NextLinkProps";

/**
 * The available entries in the header
 */
export type HeaderEntry = "About" | "Portfolio" | "GitHub";

/**
 * The configuration of Header.
 */
export interface HeaderProps {
  /**
   * Which one is active?
   */
  active?: HeaderEntry | null;
}

/**
 * Header component
 */
export function Header({ active }: HeaderProps) {
  return (
    <header className="mb-6 flex flex-col items-center justify-between gap-1 md:flex-row">
      <div className="block font-mono">
        <Link href="/">
          <Brand />
        </Link>
      </div>
      <NavContainer>
        <NavItem href="/" active={active === "About"}>
          About
        </NavItem>
        <NavItem href="/portfolio" active={active === "Portfolio"}>
          Portfolio
        </NavItem>
        {/* <NavItem href="/oss" active={active === "OSS"}>
          OSS
        </NavItem> */}
        {/* <NavItem href="/extras" active={active === "Extras"}>
          Extras
        </NavItem> */}
        <NavItem
          href="https://github.com/pan93412/homepage"
          active={active === "GitHub"}
        >
          <BsGithub className="block m-1" />
        </NavItem>
      </NavContainer>
    </header>
  );
}

/**
 * The navigation container of {@link Header}.
 */
function NavContainer({
  className,
  ...props
}: React.ComponentPropsWithoutRef<"ul">) {
  return (
    <nav>
      <ul
        className={cx(
          className,
          "NavContainer",
          "list-none",
          "grid gap-x-4",
          "grid-flow-col",
          "transition-all"
        )}
        {...props}
      />
    </nav>
  );
}

/**
 * The navigation item of {@link Header}.
 */
function NavItem({
  className,
  active,
  children,
  ...props
}: LinkProps & {
  /**
   * Is this entry active?
   */
  active?: boolean;
}) {
  return (
    <Link {...props}>
      <li
        className={cx(
          className,
          "NavItem",
          "transition-all ease-in-out",
          "rounded py-1 px-2",
          // "min-w-21",
          "text-center",
          "hover:bg-neutral-800",
          active && "bg-neutral-800 font-bold"
        )}
      >
        {children}
      </li>
    </Link>
  );
}

function Brand() {
  return (
    <svg
      width="72"
      height="14"
      viewBox="0 0 72 14"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M3.228 12.68V11.096C2.444 11.032 1.824 10.784 1.368 10.352C0.92 9.92 0.692 9.352 0.684 8.648H2.184C2.184 8.944 2.276 9.192 2.46 9.392C2.644 9.584 2.9 9.712 3.228 9.776V7.232L3.012 7.172C2.324 6.996 1.792 6.68 1.416 6.224C1.048 5.768 0.864 5.216 0.864 4.568C0.864 3.888 1.076 3.332 1.5 2.9C1.924 2.46 2.5 2.208 3.228 2.144V0.559999H3.972V2.132C4.716 2.196 5.3 2.444 5.724 2.876C6.156 3.3 6.376 3.852 6.384 4.532H4.884C4.884 3.94 4.58 3.584 3.972 3.464V5.888L4.368 5.996C5.064 6.172 5.596 6.488 5.964 6.944C6.332 7.392 6.516 7.948 6.516 8.612C6.516 9.308 6.284 9.884 5.82 10.34C5.364 10.788 4.748 11.044 3.972 11.108V12.68H3.228ZM2.364 4.484C2.364 4.764 2.436 5.008 2.58 5.216C2.732 5.424 2.948 5.576 3.228 5.672V3.464C2.652 3.576 2.364 3.916 2.364 4.484ZM3.972 9.788C4.3 9.74 4.556 9.62 4.74 9.428C4.924 9.228 5.016 8.976 5.016 8.672C5.016 8.376 4.924 8.12 4.74 7.904C4.556 7.688 4.3 7.544 3.972 7.472V9.788ZM15.3146 13.16V4.4H16.7786V5.588H16.8026C16.9226 5.172 17.1346 4.852 17.4386 4.628C17.7506 4.396 18.1346 4.28 18.5906 4.28C19.2386 4.28 19.7586 4.508 20.1506 4.964C20.5506 5.42 20.7506 6.032 20.7506 6.8V8.588C20.7506 9.364 20.5506 9.98 20.1506 10.436C19.7586 10.892 19.2386 11.12 18.5906 11.12C18.1426 11.12 17.7626 11.008 17.4506 10.784C17.1386 10.552 16.9226 10.228 16.8026 9.812H16.7786L16.8146 11.312V13.16H15.3146ZM18.0386 9.824C18.4226 9.824 18.7186 9.712 18.9266 9.488C19.1426 9.264 19.2506 8.944 19.2506 8.528V6.872C19.2506 6.456 19.1426 6.136 18.9266 5.912C18.7186 5.688 18.4226 5.576 18.0386 5.576C17.6546 5.576 17.3546 5.692 17.1386 5.924C16.9226 6.156 16.8146 6.484 16.8146 6.908V8.492C16.8146 8.916 16.9226 9.244 17.1386 9.476C17.3546 9.708 17.6546 9.824 18.0386 9.824ZM24.4539 11.12C23.7739 11.12 23.2379 10.944 22.8459 10.592C22.4539 10.232 22.2579 9.744 22.2579 9.128C22.2579 8.48 22.4819 7.98 22.9299 7.628C23.3779 7.268 24.0019 7.088 24.8019 7.088H26.3859V6.536C26.3859 6.216 26.2819 5.968 26.0739 5.792C25.8659 5.616 25.5739 5.528 25.1979 5.528C24.8539 5.528 24.5699 5.6 24.3459 5.744C24.1299 5.888 24.0099 6.08 23.9859 6.32H22.5579C22.5899 5.704 22.8499 5.212 23.3379 4.844C23.8339 4.468 24.4699 4.28 25.2459 4.28C26.0619 4.28 26.7059 4.48 27.1779 4.88C27.6499 5.28 27.8859 5.828 27.8859 6.524V11H26.4339V9.884H26.4099C26.3219 10.268 26.1059 10.572 25.7619 10.796C25.4179 11.012 24.9819 11.12 24.4539 11.12ZM24.9459 10.004C25.3699 10.004 25.7139 9.9 25.9779 9.692C26.2499 9.476 26.3859 9.192 26.3859 8.84V8.048H24.8379C24.5019 8.048 24.2379 8.136 24.0459 8.312C23.8539 8.48 23.7579 8.712 23.7579 9.008C23.7579 9.32 23.8619 9.564 24.0699 9.74C24.2859 9.916 24.5779 10.004 24.9459 10.004ZM29.7053 11V4.4H31.1693V5.66H31.1933C31.2653 5.228 31.4533 4.892 31.7573 4.652C32.0613 4.404 32.4573 4.28 32.9453 4.28C33.5933 4.28 34.1093 4.496 34.4933 4.928C34.8853 5.36 35.0813 5.94 35.0813 6.668V11H33.5813V6.824C33.5813 6.424 33.4733 6.116 33.2573 5.9C33.0493 5.684 32.7653 5.576 32.4053 5.576C32.0293 5.576 31.7333 5.688 31.5173 5.912C31.3093 6.136 31.2053 6.456 31.2053 6.872V11H29.7053ZM38.1486 11L40.5486 6.92L40.4766 6.872C40.3166 7.12 40.1086 7.312 39.8526 7.448C39.5966 7.584 39.2966 7.652 38.9526 7.652C38.4886 7.652 38.0806 7.54 37.7286 7.316C37.3766 7.084 37.1006 6.768 36.9006 6.368C36.7086 5.968 36.6126 5.504 36.6126 4.976C36.6126 4.416 36.7366 3.92 36.9846 3.488C37.2406 3.056 37.5886 2.72 38.0286 2.48C38.4766 2.24 38.9926 2.12 39.5766 2.12C40.1606 2.12 40.6726 2.244 41.1126 2.492C41.5606 2.74 41.9086 3.084 42.1566 3.524C42.4126 3.956 42.5406 4.456 42.5406 5.024C42.5406 5.4 42.4686 5.8 42.3246 6.224C42.1806 6.64 41.9766 7.084 41.7126 7.556L39.8166 11H38.1486ZM39.5766 6.524C40.0166 6.524 40.3726 6.38 40.6446 6.092C40.9246 5.804 41.0646 5.424 41.0646 4.952C41.0646 4.496 40.9246 4.124 40.6446 3.836C40.3726 3.54 40.0166 3.392 39.5766 3.392C39.1366 3.392 38.7766 3.54 38.4966 3.836C38.2246 4.124 38.0886 4.496 38.0886 4.952C38.0886 5.424 38.2246 5.804 38.4966 6.092C38.7766 6.38 39.1366 6.524 39.5766 6.524ZM46.6879 11.12C46.1199 11.12 45.6239 11.016 45.1999 10.808C44.7839 10.6 44.4599 10.308 44.2279 9.932C43.9959 9.556 43.8799 9.112 43.8799 8.6H45.3919C45.3919 8.992 45.5039 9.3 45.7279 9.524C45.9599 9.74 46.2839 9.848 46.6999 9.848C47.1159 9.848 47.4359 9.736 47.6599 9.512C47.8839 9.288 47.9959 8.984 47.9959 8.6V7.94C47.9959 7.548 47.8799 7.244 47.6479 7.028C47.4239 6.804 47.1079 6.692 46.6999 6.692H45.6679V5.492L47.5759 3.524H44.2759V2.24H49.1959V3.476L47.2639 5.444C47.9599 5.54 48.5079 5.808 48.9079 6.248C49.3079 6.688 49.5079 7.252 49.5079 7.94V8.6C49.5079 9.112 49.3919 9.556 49.1599 9.932C48.9279 10.308 48.5999 10.6 48.1759 10.808C47.7519 11.016 47.2559 11.12 46.6879 11.12ZM54.9512 11V9.26H51.0632V7.088L54.3152 2.24H55.9712L52.5032 7.472V7.94H54.9512V5.96H56.4632V11H54.9512ZM58.5705 11V9.644H60.8505V3.572L58.5585 5.276V3.692L60.5745 2.24H62.3505V9.644H64.1865V11H58.5705ZM65.7058 11V9.632L68.6698 6.56C68.9738 6.24 69.1978 5.94 69.3418 5.66C69.4938 5.38 69.5698 5.096 69.5698 4.808C69.5698 4.384 69.4538 4.056 69.2218 3.824C68.9898 3.584 68.6778 3.464 68.2858 3.464C67.8778 3.464 67.5538 3.588 67.3138 3.836C67.0818 4.076 66.9658 4.412 66.9658 4.844H65.4658C65.4738 4.284 65.5938 3.804 65.8258 3.404C66.0658 2.996 66.3938 2.68 66.8098 2.456C67.2338 2.232 67.7338 2.12 68.3098 2.12C69.1498 2.12 69.8178 2.352 70.3138 2.816C70.8178 3.28 71.0698 3.912 71.0698 4.712C71.0698 5.176 70.9498 5.636 70.7098 6.092C70.4778 6.54 70.1018 7.028 69.5818 7.556L67.5418 9.644H71.1778V11H65.7058Z"
        fill="currentColor"
      />
    </svg>
  );
}

export default Header;
